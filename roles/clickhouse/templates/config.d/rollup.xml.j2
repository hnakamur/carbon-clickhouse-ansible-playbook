<clickhouse>
    <graphite_rollup>
        <path_column_name>Path</path_column_name>
        <time_column_name>Time</time_column_name>
        <value_column_name>Value</value_column_name>
        <version_column_name>Timestamp</version_column_name>
        <pattern>
            <regexp>^carbon\.</regexp>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
        </pattern>
{% for func in ['max', 'min', 'sum'] %}
        <pattern>
            <rule_type>tag_list</rule_type>
            <regexp>^sec\.;agg={{ func }}</regexp>
            <function>{{ func }}</function>
            <retention>
                <age>0</age>
                <precision>1</precision>
            </retention>
            <retention>
                <!-- 2d -->
                <age>172800</age>
                <precision>60</precision>
            </retention>
            <retention>
                <!-- 30d -->
                <age>2592000</age>
                <precision>3600</precision>
            </retention>
        </pattern>
{% endfor %}
{% for func in ['max', 'min', 'sum'] %}
        <pattern>
            <rule_type>tag_list</rule_type>
            <regexp>^min\.;agg={{ func }}</regexp>
            <function>{{ func }}</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <!-- 30d -->
                <age>2592000</age>
                <precision>3600</precision>
            </retention>
        </pattern>
{% endfor %}
{% for func in ['max', 'min', 'sum'] %}
        <pattern>
            <rule_type>tag_list</rule_type>
            <regexp>^5min\.;agg={{ func }}</regexp>
            <function>{{ func }}</function>
            <retention>
                <age>0</age>
                <precision>300</precision>
            </retention>
            <retention>
                <!-- 30d -->
                <age>2592000</age>
                <precision>3600</precision>
            </retention>
        </pattern>
{% endfor %}
{% for func in ['max', 'min', 'sum'] %}
        <pattern>
            <rule_type>tag_list</rule_type>
            <regexp>^1h\.;agg={{ func }}</regexp>
            <function>{{ func }}</function>
            <retention>
                <age>0</age>
                <precision>3600</precision>
            </retention>
        </pattern>
{% endfor %}
{% for func in ['max', 'min', 'sum'] %}
        <pattern>
            <rule_type>tag_list</rule_type>
            <regexp>^1d\.;agg={{ func }}</regexp>
            <function>{{ func }}</function>
            <retention>
                <age>0</age>
                <precision>86400</precision>
            </retention>
        </pattern>
{% endfor %}
        <pattern>
            <regexp>^sec\.</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>1</precision>
            </retention>
            <retention>
                <!-- 2d -->
                <age>172800</age>
                <precision>60</precision>
            </retention>
            <retention>
                <!-- 30d -->
                <age>2592000</age>
                <precision>3600</precision>
            </retention>
        </pattern>
        <pattern>
            <regexp>^min\.</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <!-- 30d -->
                <age>2592000</age>
                <precision>3600</precision>
            </retention>
        </pattern>
        <pattern>
            <regexp>^5min\.</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>300</precision>
            </retention>
            <retention>
                <!-- 30d -->
                <age>2592000</age>
                <precision>3600</precision>
            </retention>
        </pattern>
        <pattern>
            <regexp>^1h\.</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>3600</precision>
            </retention>
        </pattern>
        <pattern>
            <regexp>^1d\.</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>86400</precision>
            </retention>
        </pattern>
        <default>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <!-- 30d -->
                <age>2592000</age>
                <precision>3600</precision>
            </retention>
        </default>
    </graphite_rollup>
</clickhouse>
